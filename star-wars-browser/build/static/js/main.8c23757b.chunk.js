(this["webpackJsonpstar-wars-browser"]=this["webpackJsonpstar-wars-browser"]||[]).push([[0],{16:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(1),c=n.n(a),s=n(8),l=n.n(s),i=n(2),o=Object(a.createContext)({peopleData:[]}),u=function(e){var t=e.children,n=Object(a.useState)([[]]),c=Object(i.a)(n,2),s=c[0],l=c[1];return Object(r.jsx)(o.Provider,{value:{peopleData:s,setPeopleData:l},children:t})},j=Object(a.createContext)({currentPage:1}),b=function(e){var t=e.children,n=Object(a.useState)(1),c=Object(i.a)(n,2),s=c[0],l=c[1];return Object(r.jsx)(j.Provider,{value:{currentPage:s,setCurrentPage:l},children:t})},p=function(e){var t=e.logoImage;return Object(r.jsxs)("div",{children:[" ",Object(r.jsx)("img",{src:t,alt:"star wars browser logo",className:"logo__image"})," "]})},h=n(3),d=n.n(h),O=n(4),x=function(){var e=Object(O.a)(d.a.mark((function e(t,n,r){var a,c,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],console.log("Getting data"),e.next=4,fetch("https://swapi.dev/api/people/?search=".concat(t));case 4:return c=e.sent,e.next=7,c.json();case 7:s=e.sent,a.push(s.results);case 9:if(null==s.next){e.next=20;break}return console.log("getting next page",s.next),e.next=13,fetch(s.next);case 13:return c=e.sent,e.next=16,c.json();case 16:s=e.sent,a.push(s.results),e.next=9;break;case 20:a.push(s.results),n(a);case 22:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),m=function(){var e=Object(a.useContext)(j),t=(e.currentPage,e.setCurrentPage),n=Object(a.useContext)(o),c=(n.peopleData,n.setPeopleData),s=Object(a.useState)(""),l=Object(i.a)(s,2),u=l[0],b=l[1];return Object(r.jsx)("div",{className:"search__container",children:Object(r.jsxs)("form",{className:"search__form",onSubmit:function(e){e.preventDefault(),t(1),x(u,c)},children:[Object(r.jsx)("input",{className:"search__input",value:u,onChange:function(e){b(e.target.value)},placeholder:"search for your fav character"}),Object(r.jsx)("button",{className:"search__button"})]})})},f=n.p+"static/media/star-wars-logo.ce8dfaa2.png",g=function(){return Object(r.jsxs)("header",{className:"navbar__container",children:[Object(r.jsx)(m,{}),Object(r.jsx)(p,{logoImage:f})]})},_=function(){var e=Object(O.a)(d.a.mark((function e(t,n){var r,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t.homeworld);case 2:return r=e.sent,e.next=5,r.json();case 5:a=e.sent,n(a);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),v=n(9),P=function(){var e=Object(O.a)(d.a.mark((function e(t,n,r){var a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return a=e.sent,e.next=5,a.json();case 5:c=e.sent,r((function(e){return[].concat(Object(v.a)(e),[c])}));case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),N=function(e,t,n){var r=0;return!0===t?e.split(" ").map((function(e){return(r+=e.length)<n?e:null})).join(" ")+"(...)":e},C=function(e){var t=e.filmProperty,n=e.shrinkable,a=e.maxCharacters,c=e.label;return Object(r.jsxs)("li",{className:"film-details__list-element",children:[Object(r.jsx)("div",{className:"film-details__label",children:c}),Object(r.jsx)("div",{className:"film-details__content",children:N(t,n,a)})]})},w=function(e,t,n,a,c){if(!0===t&&!a)return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("ul",{className:"film-details__list",children:[Object(r.jsxs)("div",{className:"ui__container",children:[Object(r.jsxs)("span",{className:"character-attended__span",children:[e," attended in"]}),Object(r.jsx)("button",{className:"close__button",onClick:function(){c(!0)},children:"X"})]}),null===n||void 0===n?void 0:n.map((function(e){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(C,{filmProperty:e.title,label:"Title"}),Object(r.jsx)(C,{filmProperty:e.release_date,label:"Release date"}),Object(r.jsx)(C,{filmProperty:e.opening_crawl,shrinkable:!0,maxCharacters:130,label:"Opening crawl"})]})}))]}),Object(r.jsx)("div",{className:"modal__mask",onClick:function(){c(!0)}})]})},k=function(e){var t=e.personProperty;return Object(r.jsx)("li",{className:"person-info__element",children:t})},y=function(e){var t=e.person,n=Object(a.useContext)(j),c=n.currentPage,s=(n.setCurrentPage,Object(a.useContext)(o)),l=s.peopleData,u=(s.setPeopleData,Object(a.useState)("")),b=Object(i.a)(u,2),p=b[0],h=b[1],d=Object(a.useState)([]),O=Object(i.a)(d,2),x=O[0],m=O[1],f=Object(a.useState)(!1),g=Object(i.a)(f,2),v=g[0],N=g[1],C=Object(a.useState)(!1),y=Object(i.a)(C,2),D=y[0],S=y[1];return Object(a.useEffect)((function(){_(t,h)}),[l,c]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("ul",{className:"person-info__container",onClick:function(){S(!1),N(!1),m([]),t.films.forEach((function(e){P(e,x,m)})),N(!0),w(v,x,D,S)},children:[Object(r.jsx)(k,{personProperty:t.name}),Object(r.jsx)(k,{personProperty:p.name}),Object(r.jsx)(k,{personProperty:p.population})]}),w(t.name,v,x,D,S)]})},D=function(e){var t=e.number,n=e.setCurrentPage;return Object(r.jsx)("li",{className:"page-changing__button",id:t,onClick:function(e){n(Number(e.target.id))},children:t},t)},S=function(e,t,n){for(var a=n[e-1],c=[],s=1;s<Math.ceil((null===n||void 0===n?void 0:n.length)/1);s++)c.push(s);return{currentCharactersPage:a,renderPageNumbers:c.map((function(e){return 1!==c.length?Object(r.jsx)(D,{number:e,setCurrentPage:t}):null}))}},F=function(){var e,t=Object(a.useContext)(j),n=t.currentPage,c=t.setCurrentPage,s=Object(a.useContext)(o),l=s.peopleData,i=(s.setPeopleData,S(n,c,l));return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("ul",{className:"search-results-label__list",children:[Object(r.jsx)("li",{className:"search-results-label__element",children:"Name"}),Object(r.jsx)("li",{className:"search-results-label__element",children:"Homeland"}),Object(r.jsx)("li",{className:"search-results-label__element",children:"Population"})]}),Object(r.jsx)("ul",{children:null===(e=i.currentCharactersPage)||void 0===e?void 0:e.map((function(e){return Object(r.jsx)(y,{person:e})}))}),Object(r.jsx)("ul",{className:"page-changing__container",children:i.renderPageNumbers})]})},E=function(){return Object(r.jsx)("div",{className:"home__container",children:Object(r.jsxs)(b,{children:[Object(r.jsx)(g,{}),Object(r.jsx)(F,{})]})})};n(16);var I=function(){return Object(r.jsx)(u,{children:Object(r.jsx)("div",{className:"App",children:Object(r.jsx)(E,{})})})};l.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(I,{})}),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.8c23757b.chunk.js.map